<!-- src/app/components/map/map.component.html -->

<div class="container mx-auto px-4">
  <!-- Conteneur des filtres -->
  <div class="filter-container bg-white shadow-lg rounded-lg p-4 mb-4 w-full md:w-1/4 lg:w-full">
    <h4 class="text-lg font-semibold mb-4">Filtres</h4>
    <form (ngSubmit)="applyFilters()">
      <div class="form-group mb-4">
        <label for="typeprojet" class="block text-sm font-medium text-gray-700">Type de Projet</label>
        <select id="typeprojet" class="form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm" [(ngModel)]="filters.typeprojet" name="typeprojet">
          <option value="">Tous</option>
          <option value="ferme-urbaine-participative">Ferme Urbaine Participative</option>
          <option value="jardin-potager">Jardin Potager</option>
        </select>
      </div>
      <div class="form-group mb-4">
        <label for="typeactivite" class="block text-sm font-medium text-gray-700">Type d'Activité</label>
        <select id="typeactivite" class="form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm" [(ngModel)]="filters.typeactivite" name="typeactivite">
          <option value="">Toutes</option>
          <option value="animation">Animation</option>
          <option value="compostage">Compostage</option>
          <option value="ecopaturage">Écopâturage</option>
          <option value="production">Production</option>
        </select>
      </div>
      <div class="form-group mb-4">
        <label for="techniqueprod" class="block text-sm font-medium text-gray-700">Technique de Production</label>
        <select id="techniqueprod" class="form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm" [(ngModel)]="filters.techniqueprod" name="techniqueprod">
          <option value="">Toutes</option>
          <option value="permaculture">Permaculture</option>
          <option value="pleine-terre">Pleine Terre</option>
        </select>
      </div>
      <div class="flex gap-4 mb-4">
        <button type="submit" class="btn btn-primary flex-1">Appliquer les filtres</button>
        <button type="button" class="btn btn-secondary flex-1" (click)="resetFilters()">Réinitialiser les filtres</button>
      </div>
      <!-- Afficher le nombre de résultats -->
      <p class="mt-3 text-sm font-medium text-gray-700">Nombre de résultats : {{ resultsCount }}</p>
    </form>
  </div>

  <!-- Conteneur de la carte -->
  <div class="map-container relative">
    <div id="map" class="h-screen w-full"></div>
  </div>

  <!-- Popup container -->
  <div class="popup-container fixed top-0 left-0 w-full h-full flex items-center justify-center" [ngClass]="{'hidden': !selectedGarden, 'flex': selectedGarden}">
    <div class="popup-content bg-white p-6 rounded-lg shadow-lg max-w-lg mx-auto">
      <img [src]="selectedGarden?.imageUrl" alt="{{ selectedGarden?.name }}" class="popup-image mb-4 w-full h-auto rounded-lg" />
      <div class="popup-details">
        <h3 class="text-xl font-semibold mb-2">{{ selectedGarden?.name }}</h3>
        <p>{{ selectedGarden?.details }}</p>
      </div>
    </div>
  </div>
</div>

<app-bottom-bar></app-bottom-bar>
