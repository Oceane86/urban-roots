<!-- src/app/components/map/map.component.html -->


<div class="w-full mx-auto px-4 bg-[#20493C]">
  <!-- Conteneur des filtres -->
  <div class="filter-container bg-white shadow-lg rounded-lg p-4 mb-4 w-full md:w-full lg:w-full xl:w-full">
    <h4 class="text-lg font-semibold mb-4 text-[#B7FA61]">Trouver un espace urbain</h4>
    <form (ngSubmit)="applyFilters()">
      <div class="form-group mb-4">
        <label for="typeprojet" class="block text-sm font-medium text-gray-700">Type de Projet</label>
        <select id="typeprojet" class="form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm"
          [(ngModel)]="filters.typeprojet" name="typeprojet">
          <option value="">Tous</option>
          <option value="ferme-urbaine-participative">Ferme Urbaine Participative</option>
          <option value="jardin-potager">Jardin Potager</option>
        </select>
      </div>
      <div class="form-group mb-4">
        <label for="typeactivite" class="block text-sm font-medium text-gray-700">Type d'Activité</label>
        <select id="typeactivite" class="form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm"
          [(ngModel)]="filters.typeactivite" name="typeactivite">
          <option value="">Toutes</option>
          <option value="animation">Animation</option>
          <option value="compostage">Compostage</option>
          <option value="ecopaturage">Écopâturage</option>
          <option value="production">Production</option>
        </select>
      </div>
      <div class="form-group mb-4">
        <label for="techniqueprod" class="block text-sm font-medium text-gray-700">Technique de Production</label>
        <select id="techniqueprod" class="form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm"
          [(ngModel)]="filters.techniqueprod" name="techniqueprod">
          <option value="">Toutes</option>
          <option value="permaculture">Permaculture</option>
          <option value="pleine-terre">Pleine Terre</option>
        </select>
      </div>
      <div class="flex gap-4 mb-4">
        <button type="submit" class="btn bg-[#B7FA61] flex-1 text-white">Appliquer les filtres</button>
        <button type="button" class="btn bg-[#20493C] flex-1 text-white" (click)="resetFilters()">Réinitialiser les filtres</button>
      </div>
      <!-- Afficher le nombre de résultats -->
      <p class="mt-3 text-sm font-medium text-gray-700">Nombre de résultats : {{ resultsCount }}</p>
    </form>
  </div>

  <!-- Conteneur de la carte -->
  <div class="map-container relative">
    <div id="map" class="h-screen w-full"></div>
  </div>

  <!-- Carte d'information -->
  <div
    class="info-card-container fixed w-full bg-white p-6 rounded-t-lg shadow-lg flex items-center gap-4"
    [ngClass]="{'hidden': !selectedGarden}">
    <img [src]="selectedGarden?.img" alt="{{ selectedGarden?.title }}" class="w-1/3 h-auto rounded-lg object-cover" />
    <div class="info-card-details w-2/3">
      <h3 class="text-xl font-semibold mb-2">{{ selectedGarden?.title }}</h3>
      <p class="text-gray-700">{{ selectedGarden?.ville }}, {{ selectedGarden?.cp }}</p>
      <p class="text-gray-700"><strong>Type de projet:</strong> {{ selectedGarden?.list_typeprojet.join(', ') }}</p>
      <p class="text-gray-700"><strong>Activités:</strong> {{ selectedGarden?.list_typeactivite.join(', ') }}</p>
      <p class="text-gray-700"><strong>Techniques de production:</strong> {{ selectedGarden?.list_techniqueprod.join(',
        ') }}</p>
      <p class="text-gray-700"><strong>Types de production:</strong> {{ selectedGarden?.list_typeprod.join(', ') }}</p>
    </div>
  </div>

</div>

<app-bottom-bar></app-bottom-bar>
